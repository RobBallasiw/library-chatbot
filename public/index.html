<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Library Assistant</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Your library website content goes here -->
  <div class="page-content">
    <h1>Welcome to the Library</h1>
    <p>Browse our collection, check hours, and more...</p>
    <p><a href="/mobile.html">ðŸ“± Mobile Version</a> | <a href="/privacy-policy.html">Privacy Policy</a> | <a href="/terms-of-service.html">Terms of Service</a></p>
  </div>

  <!-- Floating Chat Widget -->
  <div id="chat-widget" class="chat-widget">
    <div class="chat-header">
      <div class="header-content">
        <span class="bot-avatar">ðŸ“š</span>
        <div>
          <h3>Library Assistant</h3>
          <span class="status"><span class="status-dot"></span>AI Assistant</span>
        </div>
      </div>
      <button id="close-chat" class="close-btn" aria-label="Close chat">âœ•</button>
    </div>
    
    <div id="chat-container">
      <div id="messages"></div>
    </div>
    
    <div class="action-bar">
      <button id="request-librarian" class="librarian-btn" aria-label="Talk to librarian">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
          <circle cx="9" cy="7" r="4"/>
          <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
        </svg>
        Talk to Librarian
      </button>
      <button id="new-chat-btn" class="librarian-btn" style="display: none; background: #667eea; color: white; border-color: #667eea;" aria-label="Start new chat">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 5v14M5 12h14"/>
        </svg>
        Start New Chat
      </button>
    </div>
    
    <div class="input-area">
      <input 
        type="text" 
        id="user-input" 
        placeholder="Type your question..."
        aria-label="Chat input"
      >
      <button id="send-btn" aria-label="Send message">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Chat Toggle Button -->
  <button id="chat-toggle" class="chat-toggle" aria-label="Open chat">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
    </svg>
    <span class="notification-badge">1</span>
  </button>

  <!-- Feedback Modal -->
  <div id="feedback-modal" class="feedback-modal">
    <div class="feedback-modal-content">
      <div class="feedback-modal-header">
        <h3>Rate Your Experience</h3>
        <button class="feedback-close-btn" onclick="closeFeedbackModal()">Ã—</button>
      </div>
      <div class="feedback-modal-body">
        <p>How was your experience with the library assistant?</p>
        <div class="star-rating">
          <span class="star" data-rating="1">â˜…</span>
          <span class="star" data-rating="2">â˜…</span>
          <span class="star" data-rating="3">â˜…</span>
          <span class="star" data-rating="4">â˜…</span>
          <span class="star" data-rating="5">â˜…</span>
        </div>
        <textarea id="feedback-comment" placeholder="Any additional comments? (optional)" rows="4"></textarea>
        <div class="feedback-actions">
          <button class="feedback-skip-btn" onclick="closeFeedbackModal()">Skip</button>
          <button class="feedback-submit-btn" onclick="submitFeedback()">Submit Feedback</button>
        </div>
      </div>
    </div>
  </div>
  
  <script>
    // Auto-redirect mobile devices to mobile version
    if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
      // Check if user explicitly wants desktop version
      const urlParams = new URLSearchParams(window.location.search);
      if (!urlParams.has('desktop')) {
        window.location.href = '/mobile.html';
      }
    }
  </script>
  <script src="script.js"></script>
</body>
</html>
